# Report 01/12 Week 6 - Epic 2.1: Search & Filtering

| Description | Commit Message |
|-------------|----------------|
| Connected MainActivity to the application navigation graph by adding @AndroidEntryPoint annotation for Hilt dependency injection, setting up NavController with rememberNavController(), and replacing the default greeting UI with nexusNewsNavGraph. Removed unused greeting composable and preview functions. This completes Epic 1.6 (Basic Navigation) from the roadmap, making the app fully functional by wiring together all existing components (NewsListScreen, NewsDetailScreen, ViewModels, Repository, API integration). | `feat(ui): connect MainActivity to navigation graph and complete Epic 1.6` |
| Fixed critical dependency compatibility issue by upgrading desugar_jdk_libs from version 1.1.5 to 2.1.5 in gradle/libs.versions.toml. This upgrade is required for Android 15 (compileSdk 35) compatibility to prevent potential runtime crashes when using java.time APIs. The lint error CoreLibDesugaringV1 identified this blocker issue. | `fix(deps): upgrade desugar_jdk_libs to 2.1.5 for Android 15 compatibility` |
| Fixed compilation errors in MainActivity.kt: corrected import casing for NexusNewsNavGraph and NexusNewsTheme (lowercase to PascalCase), and fixed Surface parameter typo from `r =` to `modifier =`. | `fix(ui): correct import casing and Surface parameter in MainActivity` |
| Fixed NewsListScreen.kt compilation errors: added missing imports for Icon, Icons, Spacer, height, and size composables. Updated ErrorState function signature to accept message parameter for proper error display. | `fix(ui): add missing imports and fix ErrorState signature in NewsListScreen` |
| Added OptIn annotation for ExperimentalLayoutApi to CategoryFilters function in SearchScreen.kt to fix release build compilation error with FlowRow composable. | `fix(ui): add ExperimentalLayoutApi OptIn to CategoryFilters` |
| Implemented bottom navigation bar with MainScreen composable. Created BottomNavItem data class for navigation items with selected/unselected icons. Added NavigationBar with Home, Search, Bookmarks, and Settings items. Navigation logic includes state preservation with saveState/restoreState and single top launch mode. Bottom bar hides on detail screens. Updated MainActivity to use MainScreen instead of direct NavGraph. This enables access to the Search feature completing Epic 2.1. | `feat(nav): implement bottom navigation bar with MainScreen` |
| Implemented search history using DataStore Preferences. Created SearchHistoryDataStore class with @Singleton injection for persistent storage. Stores up to 20 recent queries with add/remove/clear operations. Updated SearchViewModel with searchHistory StateFlow and history management functions. Updated SearchScreen to display recent searches section when query is empty, with clickable items to re-run searches and clear buttons. Completes the "Add search history" requirement from Epic 2.1. | `feat(search): implement search history with DataStore` |
| Fixed HTTP 404 errors by properly initializing API key in AuthInterceptor. Updated NetworkModule to call setApiKey(BuildConfig.NEWS_API_KEY) when providing AuthInterceptor. Also corrected base URL from `newsapi.org/v2/` to `newsapi.org/` to avoid double path prefix since API endpoints already include `/v2/`. | `fix(api): initialize API key in AuthInterceptor to fix HTTP 404 errors` |
| Fixed duplicate apiKey query parameter issue. The NewsRemoteDataSource passes apiKey="" to API methods, and AuthInterceptor was adding another apiKey param. Modified AuthInterceptor to remove any existing apiKey parameters before adding the real key, preventing duplicate/conflicting query parameters. | `fix(api): replace empty apiKey query param in AuthInterceptor` |
